(()=>{var nt=(...a)=>pt(gt(...a));var $=new AudioContext,pt=(...a)=>{let r=$.createBuffer(a.length,a[0].length,44100),g=$.createBufferSource();return a.map((u,D)=>r.getChannelData(D).set(u)),g.buffer=r,g.connect($.destination),g.start(),g},gt=(a=1,r=.05,g=220,u=0,D=0,n=.1,C=0,B=1,k=0,V=0,Y=0,E=0,A=0,j=0,S=0,q=0,_=0,M=1,P=0,I=0)=>{let s=Math.PI*2,H=Q=>Q>0?1:-1,N=k*=500*s/44100/44100,R=g*=(1+r*2*Math.random()-r)*s/44100,e=[],p=0,F=0,h=0,w=1,O=0,L=0,m=0,b,G;for(u=u*44100+9,P*=44100,D*=44100,n*=44100,_*=44100,V*=500*s/44100**3,S*=s/44100,Y*=s/44100,E*=44100,A=A*44100|0,G=u+P+D+n+_|0;h<G;e[h++]=m)++L%(q*100|0)||(m=C?C>1?C>2?C>3?Math.sin((p%s)**3):Math.max(Math.min(Math.tan(p),1),-1):1-(2*p/s%2+2)%2:1-4*Math.abs(Math.round(p/s)-p/s):Math.sin(p),m=(A?1-I+I*Math.sin(s*h/A):1)*H(m)*Math.abs(m)**B*a*.3*(h<u?h/u:h<u+P?1-(h-u)/P*(1-M):h<u+P+D?M:h<G-_?(G-h-_)/n*M:0),m=_?m/2+(_>h?0:(h<G-_?1:(G-h)/_)*e[h-_|0]/2):m),b=(g+=k+=V)*Math.cos(S*F++),p+=b-b*j*(1-(Math.sin(h)+1)*1e9%2),w&&++w>E&&(g+=Y,R+=Y,w=0),A&&!(++O%A)&&(g=R,k=N,w=w||1);return e};var T=["#0a080d","#f4f4f4","#697594","#f7aaa8","#d4689a","#782c96","#e83562","#f2825c","#ffc76e","#88c44d","#3f9e59","#373461","#4854a8","#7199d9","#9e5252","#4d2536"];var ot=[[1.5,,332,.01,.03,.2,,1.24,-3.6,,,,,.4,309,.3,,.77,.09],[1.5,,603,,.02,0,,.04,,-.4,473,,,.1,,,.18,.2,.1],[1.5,,152,.01,.07,.06,1,1.21,-16,,,,,,,,,.62,.03],[,,468,.02,.22,.45,1,.84,,5.6,-37,.05,.09,,,,,.8,.27,.05],[,,1959,.01,.04,.12,,.2,,.1,252,.04,,.1,,,,.5,.01,.09],[2.5,,450,.05,.15,.38,1,1.72,.2,-.2,128,.13,.18,,,,.08,.79,.13,.31],[1.5,0,261.6256,.07,.1,.26,,1.58,,,,,,.3,,.1,,.43,.17],[2.63,,1727,,.03,.23,,2.65,,-89,5,.06,,,166,,.12,.72],[,,391,.03,.26,.45,1,.07,,,-11,.07,.1,,,,,.56,.14,.2],[1.34,,1117,.07,.07,0,2,.05,,,274,.08,.11,,10,,.09,.82,.11],[,,1705,.24,.15,.12,2,2.97,-5.7,,300,.04,.08],[1.35,,470,.18,.07,0,,2.23,,,-948,,.12,.1,-37,,.01,,,.21],[,,248,,.06,.07,4,1.26,,.3,,,.01,,,.1,,.7,.06,.38],[2.5,,328,.03,.26,.4,4,1.09,.5,.1,,,,.5,,.3,.33,.43,.05,.45],[1.5,,0,.02,,.04,,.37,9.9,,,,,.1,,,.24,,.15],[2,,657,.22,.33,0,3,.28,,-.7,,,.36,,,,.13,.8,.02,.73]];function ft(a={}){let r=window,g=r.document.body,u=(t,o,f)=>t.addEventListener(o,f),D=(t,o,f)=>t.removeEventListener(o,f),n={WIDTH:a.width??null,HEIGHT:a.height??null,CANVAS:r.document.createElement("canvas"),PARENT:a.parent??g,TAPPED:!1,TAPPING:!1,TAPX:0,TAPY:0,ELAPSED:0,FPS:0,math:r.Math,loop:{init:[],update:[],draw:[]}},C=a.fps??60,B=a.background??null,k=a.global??!0,V=a.antialias??!0,Y=a.pixelart??!1,E=a.fullscreen??!0,A=a.autoscale??!0,j=a.tappingInterval??100,S=a.loop??{},q=a.plugins??[],_="ontouchstart"in r||r.navigator.maxTouchPoints>0,M=0,P=0,I=null,s=1,H={top:0,left:0},N=null,R=null,e=null,p=null,F=0,h=0,w=1/C,O=1e3/C,L=0,m=0,b={count:0,time:0},G=Math.PI/180,Q=180/Math.PI,K=Math.PI*2,x={set(t,o){n[t]=o,k&&(r[t]=o)}};function J(){if(_RATIO=n.WIDTH/n.HEIGHT,N=n.WIDTH,R=n.HEIGHT,_){let t=0,o=0;I=f=>{if(p=performance.now(),p-P>j){let i=f.touches[0];X(!0,i.pageX,i.pageY),P=p}},u(n.CANVAS,"touchstart",function(f){f.preventDefault();let i=f.touches[0];t=i.pageX,o=i.pageX,u(g,"touchmove",I),X(!0,i.pageX,i.pageY),P=M=performance.now()}),u(n.CANVAS,"touchend",function(f){f.preventDefault(),D(g,"touchmove",I),X(!1),performance.now()-M<=150&&et(!0,t,o)})}else I=t=>{p=performance.now(),p-P>j&&(P=p,X(!0,t.pageX,t.pageY))},u(n.CANVAS,"mousedown",function(t){t.preventDefault(),u(g,"mousemove",I),X(!0,t.pageX,t.pageY),P=M=performance.now()}),u(n.CANVAS,"mouseup",function(t){t.preventDefault(),D(g,"mousemove",I),X(!1),performance.now()-M<=150&&et(!0,t.pageX,t.pageY)});u(r,"focus",()=>{m===0&&(F=performance.now(),m=requestAnimationFrame(U))}),u(r,"blur",()=>{m&&(cancelAnimationFrame(m),m=0),D(g,_?"mousemove":"touchmove",I),X(!1)}),tt(),(A||E)&&u(r,"resize",tt),(S.init||r.init)&&n.loop.init.push(S.init||r.init),(S.update||r.update)&&n.loop.update.push(S.update||r.update),(S.draw||r.draw)&&n.loop.draw.push(S.draw||r.draw),it();for(let t of n.loop.init)t();B!=null&&(n.CANVAS.style.backgroundColor=T[B%16]),F=performance.now(),m=requestAnimationFrame(U)}function U(){let t=0;for(p=performance.now(),h=p-F,F=p,L+=h,h>1e3&&(L=O);L>=O;){for(let o of n.loop.update)o(w);x.set("ELAPSED",n.ELAPSED+w),L-=O,t++,at()}if(t>0){for(let o of n.loop.draw)o();b.count++,b.time+=t*w,b.time>=1&&(x.set("FPS",b.count),b.time-=1,b.count=0)}m=requestAnimationFrame(U)}function it(){q.sort((t,o)=>(t.priority??10)-(o.priority??10));for(let t of q){let o=t(n,x);if(o)for(let f in o)x.set(f,o[f])}}function lt(t){n.WIDTH>0&&E&&(E=!1,n.HEIGHT=n.HEIGHT>0?n.HEIGHT:n.WIDTH),t.width=n.WIDTH,t.height=n.HEIGHT,n.PARENT.appendChild(t),t.ctx=t.getContext("2d"),e=t.ctx,t.style.display="block",E?(t.style.position="absolute",t.style.top=t.style.bottom=t.style.left=t.style.right=0):A&&(t.style.margin="auto"),Y&&(V=!1),V||(e.imageSmoothingEnabled=!1,t.style.imageRendering="pixelated"),H.top=t.offsetTop,H.left=t.offsetLeft}function tt(){let t=n.CANVAS;!A&&!E||(N=r.innerWidth,R=r.innerHeight,E?(t.width=N,t.height=R,x.set("WIDTH",N),x.set("HEIGHT",R)):A&&(s=Math.min(N/n.WIDTH,R/n.HEIGHT),s=Y?Math.floor(s):s,t.style.width=n.WIDTH*s+"px",t.style.height=n.HEIGHT*s+"px"),H.top=t.offsetTop,H.left=t.offsetLeft)}function rt(){for(let t in n)t in r||(r[t]=n[t])}function at(){x.set("TAPPED",!1)}function et(t,o,f){x.set("TAPPED",t),x.set("TAPX",(o-H.left)/s),x.set("TAPY",(f-H.top)/s)}function X(t,o,f){x.set("TAPPING",t),x.set("TAPX",(o-H.left)/s),x.set("TAPY",(f-H.top)/s)}return n.math.rand=Math.random,n.math.randi=function(t=1,o=100){return Math.floor(Math.random()*(o-t+1)+t)},n.math.lerp=function(t,o,f){return t+(o-t)*f},n.math.deg2rad=function(t){return t*G},n.math.rad2deg=function(t){return t*Q},n.math.clamp=function(t,o,f){return Math.min(Math.max(t,o),f)},n.clear=function(t=null){t==null?e.clearRect(0,0,n.WIDTH,n.HEIGHT):(e.fillStyle=T[~~t%16],e.beginPath(),e.fillRect(0,0,n.WIDTH,n.HEIGHT))},n.rect=function(t,o,f,i,l=0,d=1){e.strokeStyle=T[~~l%16],e.lineWidth=~~d,e.beginPath(),e.strokeRect(~~t,~~o,~~f,~~i)},n.rectfill=function(t,o,f,i,l=0){e.fillStyle=T[~~l%16],e.beginPath(),e.fillRect(~~t,~~o,~~f,~~i)},n.circle=function(t,o,f,i=0,l=1){e.strokeStyle=T[~~i%16],e.lineWidth=~~l,e.beginPath(),e.arc(~~t,~~o,~~f,0,K),e.closePath(),e.stroke()},n.circlefill=function(t,o,f,i=0){e.fillStyle=T[~~i%16],e.beginPath(),e.arc(~~t,~~o,~~f,0,K),e.closePath(),e.fill()},n.oval=function(t,o,f,i,l=0,d=1){e.strokeStyle=T[~~l%16],e.lineWidth=~~d,e.beginPath(),e.ellipse(~~t+~~f,~~o+~~i,~~f,~~i,0,0,K),e.closePath(),e.stroke()},n.ovalfill=function(t,o,f,i,l=0){e.fillStyle=T[~~l%16],e.beginPath(),e.ellipse(~~t+~~f,~~o+~~i,~~f,~~i,0,0,K),e.closePath(),e.fill()},n.triangle=function(t,o,f,i,l,d,z=0,v=1){n.poly([t,o,f,i,l,d],z,v)},n.trianglefill=function(t,o,f,i,l,d,z=0){n.polyfill([t,o,f,i,l,d],z)},n.poly=function(t,o=0,f=1){e.strokeStyle=T[~~o%16],e.lineWidth=~~f,e.beginPath();let i=t.length;for(let l=0;l<i;l+=2)l===0?e.moveTo(~~t[l],~~t[l+1]):e.lineTo(~~t[l],~~t[l+1]);e.lineTo(~~t[0],~~t[1]),e.stroke()},n.polyfill=function(t,o=0){e.fillStyle=T[~~o%16],e.beginPath();let f=t.length;for(let i=0;i<f;i+=2)i===0?e.moveTo(t[i],t[i+1]):e.lineTo(t[i],t[i+1]);e.lineTo(t[0],t[1]),e.fill()},n.line=function(t,o,f,i,l=0,d=1){e.strokeStyle=T[~~l%16],e.beginPath(),e.lineWidth=~~d,e.moveTo(~~t,~~o),e.lineTo(~~f,~~i),e.stroke()},n.text=function(t,o,f,i=0,l=null,d="monospace"){l=l||Math.max(16,n.HEIGHT/16),e.textBaseline="top",e.font=~~l+"px "+d,e.fillStyle=T[~~i%16],e.fillText(f,~~t,~~o)},n.image=function(t,o,f){e.drawImage(f,~~t,~~o)},n.paint=function(t,o,f){let i=new OffscreenCanvas(t,o),l=e;if(i.width=t,i.height=o,e=i.getContext("2d"),typeof f=="function")f(i,e);else if(Array.isArray(f)){let d=e.createImageData(t,o),z=d.data,v=y=0;for(let ut of f){for(let Z of ut.split("")){let W=y*(t*4)+v*4;if(Z===" "||Z===".")z[W]=0,z[W+1]=0,z[W+2]=0,z[W+3]=0;else{c=T[~~parseInt(Z,16)];let ct=parseInt(c.slice(1,3),16),st=parseInt(c.slice(3,5),16),ht=parseInt(c.slice(5,7),16);z[W]=ct,z[W+1]=st,z[W+2]=ht,z[W+3]=255}v++}y++,v=0}e.putImageData(d,0,0)}return e=l,i},n.transform=function(t,o,f=1,i=0){e.setTransform(f,0,0,f,t,o),e.rotate(n.math.deg2rad(i))},n.push=function(){e.save()},n.pop=function(){e.restore()},n.sfx=function(t=0,o=1,f=0,i=0){let l=Array.isArray(t)?t:ot[~~t%16];return(o!==1||f!==0||i!==0)&&(l=[...l],l[0]=(Number(o)||1)*(l[0]||1),l[1]=Number(i)>0?i:0,l[10]=~~l[10]+~~f),nt(...l)},k&&rt(),lt(n.CANVAS),r.document.readyState==="loading"?u(r,"DOMContentLoaded",J):J(),n}window.floppy=ft;})();
