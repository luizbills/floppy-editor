(()=>{var ot=(...a)=>mt(Tt(...a));var Z=new AudioContext,mt=(...a)=>{let f=Z.createBuffer(a.length,a[0].length,44100),d=Z.createBufferSource();return a.map((s,D)=>f.getChannelData(D).set(s)),d.buffer=f,d.connect(Z.destination),d.start(),d},Tt=(a=1,f=.05,d=220,s=0,D=0,e=.1,N=0,q=1,L=0,v=0,k=0,R=0,I=0,j=0,w=0,U=0,A=0,M=1,_=0,z=0)=>{let u=Math.PI*2,E=J=>J>0?1:-1,W=L*=500*u/44100/44100,C=d*=(1+f*2*Math.random()-f)*u/44100,n=[],p=0,P=0,h=0,S=1,F=0,O=0,T=0,H,x;for(s=s*44100+9,_*=44100,D*=44100,e*=44100,A*=44100,v*=500*u/44100**3,w*=u/44100,k*=u/44100,R*=44100,I=I*44100|0,x=s+_+D+e+A|0;h<x;n[h++]=T)++O%(U*100|0)||(T=N?N>1?N>2?N>3?Math.sin((p%u)**3):Math.max(Math.min(Math.tan(p),1),-1):1-(2*p/u%2+2)%2:1-4*Math.abs(Math.round(p/u)-p/u):Math.sin(p),T=(I?1-z+z*Math.sin(u*h/I):1)*E(T)*Math.abs(T)**q*a*.3*(h<s?h/s:h<s+_?1-(h-s)/_*(1-M):h<s+_+D?M:h<x-A?(x-h-A)/e*M:0),T=A?T/2+(A>h?0:(h<x-A?1:(x-h)/A)*n[h-A|0]/2):T),H=(d+=L+=v)*Math.cos(w*P++),p+=H-H*j*(1-(Math.sin(h)+1)*1e9%2),S&&++S>R&&(d+=k,C+=k,S=0),I&&!(++F%I)&&(d=C,L=W,S=S||1);return n};var m=["#1a1c2c","#333c57","#566c86","#f4f4f4","#5d275d","#b13e53","#f89b99","#ef7d57","#ffcd75","#a7f070","#38b764","#257179","#29366f","#3b5dc9","#41a6f6","#73eff7"];var it=[[1.5,,332,.01,.03,.2,,1.24,-3.6,,,,,.4,309,.3,,.77,.09],[1.5,,603,,.02,0,,.04,,-.4,473,,,.1,,,.18,.2,.1],[1.5,,152,.01,.07,.06,1,1.21,-16,,,,,,,,,.62,.03],[,,468,.02,.22,.45,1,.84,,5.6,-37,.05,.09,,,,,.8,.27,.05],[,,1959,.01,.04,.12,,.2,,.1,252,.04,,.1,,,,.5,.01,.09],[2.5,,450,.05,.15,.38,1,1.72,.2,-.2,128,.13,.18,,,,.08,.79,.13,.31],[1.5,,261.6256,.07,.1,.26,,1.58,,,,,,.3,,.1,,.43,.17],[2.63,,1727,,.03,.23,,2.65,,-89,5,.06,,,166,,.12,.72],[,,391,.03,.26,.45,1,.07,,,-11,.07,.1,,,,,.56,.14,.2],[1.34,,1117,.07,.07,0,2,.05,,,274,.08,.11,,10,,.09,.82,.11],[,,1705,.24,.15,.12,2,2.97,-5.7,,300,.04,.08],[1.35,,470,.18,.07,0,,2.23,,,-948,,.12,.1,-37,,.01,,,.21],[,,248,,.06,.07,4,1.26,,.3,,,.01,,,.1,,.7,.06,.38],[2.5,,328,.03,.26,.4,4,1.09,.5,.1,,,,.5,,.3,.33,.43,.05,.45],[1.5,,0,.02,,.04,,.37,9.9,,,,,.1,,,.24,,.15],[2,,657,.22,.33,0,3,.28,,-.7,,,.36,,,,.13,.8,.02,.73]];function lt(a={}){let f=window,d=f.document.body,s=(t,o,i)=>t.addEventListener(o,i),D=(t,o,i)=>t.removeEventListener(o,i),e={WIDTH:a.width??null,HEIGHT:a.height??a.width??null,CANVAS:f.document.createElement("canvas"),PARENT:a.parent??d,TAPPED:!1,TAPPING:!1,TAPX:0,TAPY:0,ELAPSED:0,FPS:0,CENTERX:0,CENTERY:0,loop:{init:[],update:[],draw:[]}},N=a.fps??60,q=a.background??0,L=a.global??!0,v=a.antialias??!0,k=a.pixelart??!1,R=a.fullscreen??!0,I=a.autoscale??!0,j=a.tappingInterval??100,w=a.loop??{},U=a.plugins??[],A="ontouchstart"in f||f.navigator.maxTouchPoints>0,M=0,_=0,z=null,u=1,E={top:0,left:0},W=null,C=null,n=null,p={},P=null,h=0,S=0,F=1/N,O=1e3/N,T=0,H=0,x={count:0,time:0},J=Math.PI/180,ft=180/Math.PI,$=Math.PI*2,rt=[],V,g={set(t,o){e[t]=o,L&&(f[t]=o)}};function tt(){if(_RATIO=e.WIDTH/e.HEIGHT,W=e.WIDTH,C=e.HEIGHT,A){let t=0,o=0;z=i=>{if(P=performance.now(),P-_>j){let l=i.touches[0];Y(!0,l.pageX,l.pageY),_=P}},s(e.CANVAS,"touchstart",function(i){i.preventDefault();let l=i.touches[0];t=l.pageX,o=l.pageY,s(d,"touchmove",z),Y(!0,l.pageX,l.pageY),_=M=performance.now()}),s(e.CANVAS,"touchend",function(i){i.preventDefault(),D(d,"touchmove",z),Y(!1),performance.now()-M<=150&&nt(!0,t,o)})}else z=t=>{P=performance.now(),P-_>j&&(_=P,Y(!0,t.pageX,t.pageY))},s(e.CANVAS,"mousedown",function(t){t.preventDefault(),s(d,"mousemove",z),Y(!0,t.pageX,t.pageY),_=M=performance.now()}),s(e.CANVAS,"mouseup",function(t){t.preventDefault(),D(d,"mousemove",z),Y(!1),performance.now()-M<=150&&nt(!0,t.pageX,t.pageY)});s(f,"focus",()=>{H===0&&(h=performance.now(),H=requestAnimationFrame(K))}),s(f,"blur",()=>{H&&(cancelAnimationFrame(H),H=0),D(d,A?"mousemove":"touchmove",z),Y(!1)}),et(),(I||R)&&s(f,"resize",et),(w.init||f.init)&&e.loop.init.push(w.init||f.init),(w.update||f.update)&&e.loop.update.push(w.update||f.update),(w.draw||f.draw)&&e.loop.draw.push(w.draw||f.draw),at();for(let t of e.loop.init)t();q!=null&&(e.CANVAS.style.backgroundColor=m[q%16]),h=performance.now(),H=requestAnimationFrame(K)}function K(){let t=0;for(P=performance.now(),S=P-h,h=P,T+=S,S>1e3&&(T=O);T>=O;){for(let o of e.loop.update)o(F);g.set("ELAPSED",e.ELAPSED+F),T-=O,t++,ut()}if(t>0){for(let o of e.loop.draw)o();x.count++,x.time+=t*F,x.time>=1&&(g.set("FPS",x.count),x.time-=1,x.count=0)}H=requestAnimationFrame(K)}function at(){U.sort((t,o)=>(t.priority??10)-(o.priority??10));for(let t of U){let o=t(e,g);if(o)for(let i in o)g.set(i,o[i])}}function st(t){e.WIDTH>0&&R&&(R=!1,e.HEIGHT=e.HEIGHT>0?e.HEIGHT:e.WIDTH),t.width=e.WIDTH,t.height=e.HEIGHT,g.set("CENTERX",e.WIDTH/2),g.set("CENTERY",e.HEIGHT/2),e.PARENT.appendChild(t),t.ctx=t.getContext("2d"),n=t.ctx,n.textAlign="start",n.textBaseline="top",t.style.display="block",R?(t.style.position="absolute",t.style.top=t.style.bottom=t.style.left=t.style.right=0):I&&(t.style.margin="auto"),k&&(v=!1),v||(n.imageSmoothingEnabled=!1,t.style.imageRendering="pixelated"),E.top=t.offsetTop,E.left=t.offsetLeft}function et(){let t=e.CANVAS;!I&&!R||(W=f.innerWidth,C=f.innerHeight,R?(t.width=W,t.height=C,g.set("WIDTH",W),g.set("HEIGHT",C)):I&&(u=Math.min(W/e.WIDTH,C/e.HEIGHT),u=k?Math.floor(u):u,t.style.width=e.WIDTH*u+"px",t.style.height=e.HEIGHT*u+"px"),g.set("CENTERX",e.WIDTH/2),g.set("CENTERY",e.HEIGHT/2),E.top=t.offsetTop,E.left=t.offsetLeft,e.textalign(p.textAlign||V,p.textBaseline||V),e.linestyle(p.lineWidth||V,p.lineJoin||V,p.lineDash||V))}function ct(){for(let t in e){if(t in f){console.warn(`${t} already exists in global context`);continue}f[t]=e[t]}}function ut(){g.set("TAPPED",!1)}function nt(t,o,i){g.set("TAPPED",t),g.set("TAPX",(o-E.left)/u),g.set("TAPY",(i-E.top)/u)}function Y(t,o,i){g.set("TAPPING",t),g.set("TAPX",(o-E.left)/u),g.set("TAPY",(i-E.top)/u)}for(let t of["sin","cos","abs","ceil","round","floor","min","max","pow","sqrt","sign"])e[t]=f.Math[t];return e.lerp=(t,o,i)=>t+(o-t)*i,e.distance=(t,o)=>Math.abs(t-o),e.deg2rad=t=>t*J,e.rad2deg=t=>t*ft,e.clamp=function(t,o,i){return Math.min(Math.max(t,o),i)},e.rand=f.Math.random,e.randi=(t=1,o=100)=>e.floor(e.rand()*(o-t+1)+t),e.chance=(t=.5)=>e.rand()<=t,e.choose=t=>t[e.randi(0,t.length-1)],e.clear=(t=null)=>{t==null?n.clearRect(0,0,e.WIDTH,e.HEIGHT):(n.fillStyle=m[~~t%16],n.beginPath(),n.fillRect(0,0,e.WIDTH,e.HEIGHT))},e.rect=(t,o,i,l,r=0)=>{n.strokeStyle=m[~~r%16],n.beginPath(),n.strokeRect(~~t,~~o,~~i,~~l)},e.rectfill=(t,o,i,l,r=0)=>{n.fillStyle=m[~~r%16],n.beginPath(),n.fillRect(~~t,~~o,~~i,~~l)},e.circ=(t,o,i,l=0)=>{n.strokeStyle=m[~~l%16],n.beginPath(),n.arc(~~t,~~o,~~i,0,$),n.closePath(),n.stroke()},e.circfill=(t,o,i,l=0)=>{n.fillStyle=m[~~l%16],n.beginPath(),n.arc(~~t,~~o,~~i,0,$),n.closePath(),n.fill()},e.oval=(t,o,i,l,r=0)=>{n.strokeStyle=m[~~r%16],n.beginPath(),n.ellipse(~~t+~~i,~~o+~~l,~~i,~~l,0,0,$),n.closePath(),n.stroke()},e.ovalfill=(t,o,i,l,r=0)=>{n.fillStyle=m[~~r%16],n.beginPath(),n.ellipse(~~t+~~i,~~o+~~l,~~i,~~l,0,0,$),n.closePath(),n.fill()},e.poly=(t,o=0)=>{n.strokeStyle=m[~~o%16],n.beginPath();let i=t.length;for(let l=0;l<i;l+=2)l===0?n.moveTo(~~t[l],~~t[l+1]):n.lineTo(~~t[l],~~t[l+1]);n.stroke()},e.polyfill=(t,o=0)=>{n.fillStyle=m[~~o%16],n.beginPath();let i=t.length;for(let l=0;l<i;l+=2)l===0?n.moveTo(~~t[l],~~t[l+1]):n.lineTo(~~t[l],~~t[l+1]);n.fill()},e.line=(t,o,i,l,r=0)=>{n.strokeStyle=m[~~r%16],n.beginPath(),n.moveTo(~~t,~~o),n.lineTo(~~i,~~l),n.stroke()},e.linestyle=(t=1,o="miter",i=null)=>{n.lineWidth=p.lineWidth=t,n.lineJoin=p.lineJoin=o,i?(p.lineDash=Array.isArray(i)?i:[i],n.setLineDash(p.lineDash)):(p.lineDash=rt,n.setLineDash(p.lineDash))},e.text=(t,o,i,l=0,r=null,X="monospace")=>{r=r||Math.max(16,e.HEIGHT/16),n.font=~~r+"px "+X,n.fillStyle=m[~~l%16],n.fillText(i,~~t,~~o)},e.textalign=(t="start",o="top")=>{n.textAlign=p.textAlign=t,n.textBaseline=p.textBaseline=o},e.image=(t,o,i)=>{n.drawImage(i,~~t,~~o)},e.paint=(t,o,i)=>{let l=new OffscreenCanvas(t,o),r=n;if(l.width=t,l.height=o,n=l.getContext("2d"),typeof i=="function")i(l,n);else if(Array.isArray(i)){let X=n.createImageData(t,o),b=X.data,B=y=0;for(let pt of i){for(let Q of pt.split("")){let G=y*(t*4)+B*4;if(Q===" "||Q===".")b[G]=0,b[G+1]=0,b[G+2]=0,b[G+3]=0;else{c=m[~~parseInt(Q,16)];let ht=parseInt(c.slice(1,3),16),gt=parseInt(c.slice(3,5),16),dt=parseInt(c.slice(5,7),16);b[G]=ht,b[G+1]=gt,b[G+2]=dt,b[G+3]=255}B++}y++,B=0}n.putImageData(X,0,0)}return n=r,l},e.transform=(t,o,i=1,l=0)=>{n.setTransform(i,0,0,i,t,o),n.rotate(l)},e.alpha=(t=1)=>{n.globalAlpha=t},e.blendmode=(t="source-over")=>{n.globalCompositeOperation=t},e.push=()=>n.save(),e.pop=()=>n.restore(),e.sfx=(t=0,o=1,i=0,l=null)=>{if(navigator.userActivation&&!navigator.userActivation.hasBeenActive)return;let r=Array.isArray(t)?t:it[~~t%16];return(o!==1||i!==0||l!=null)&&(r=[...r],r[0]=(Number(o)||1)*(r[0]||1),r[1]=l>=0?l:void 0,r[10]=~~r[10]+~~i),ot(...r)},e.collision=(t,o,i,l,r,X,b,B)=>t<r+b&&t+i>r&&o<X+B&&o+l>X,L&&ct(),st(e.CANVAS),f.document.readyState==="loading"?s(f,"DOMContentLoaded",tt):tt(),e}window.floppy=lt;})();
