(()=>{var ot=(...a)=>xt(dt(...a));var $=new AudioContext,xt=(...a)=>{let r=$.createBuffer(a.length,a[0].length,44100),g=$.createBufferSource();return a.map((u,E)=>r.getChannelData(E).set(u)),g.buffer=r,g.connect($.destination),g.start(),g},dt=(a=1,r=.05,g=220,u=0,E=0,e=.1,N=0,v=1,L=0,F=0,k=0,S=0,z=0,j=0,M=0,q=0,T=0,w=1,_=0,b=0)=>{let s=Math.PI*2,D=J=>J>0?1:-1,Y=L*=500*s/44100/44100,G=g*=(1+r*2*Math.random()-r)*s/44100,n=[],h=0,I=0,p=0,R=1,V=0,O=0,x=0,H,d;for(u=u*44100+9,_*=44100,E*=44100,e*=44100,T*=44100,F*=500*s/44100**3,M*=s/44100,k*=s/44100,S*=44100,z=z*44100|0,d=u+_+E+e+T|0;p<d;n[p++]=x)++O%(q*100|0)||(x=N?N>1?N>2?N>3?Math.sin((h%s)**3):Math.max(Math.min(Math.tan(h),1),-1):1-(2*h/s%2+2)%2:1-4*Math.abs(Math.round(h/s)-h/s):Math.sin(h),x=(z?1-b+b*Math.sin(s*p/z):1)*D(x)*Math.abs(x)**v*a*.3*(p<u?p/u:p<u+_?1-(p-u)/_*(1-w):p<u+_+E?w:p<d-T?(d-p-T)/e*w:0),x=T?x/2+(T>p?0:(p<d-T?1:(d-p)/T)*n[p-T|0]/2):x),H=(g+=L+=F)*Math.cos(M*I++),h+=H-H*j*(1-(Math.sin(p)+1)*1e9%2),R&&++R>S&&(g+=k,G+=k,R=0),z&&!(++V%z)&&(g=G,L=Y,R=R||1);return n};var m=["#1a1c2c","#333c57","#566c86","#f4f4f4","#5d275d","#b13e53","#f89b99","#ef7d57","#ffcd75","#a7f070","#38b764","#257179","#29366f","#3b5dc9","#41a6f6","#73eff7"];var it=[[1.5,,332,.01,.03,.2,,1.24,-3.6,,,,,.4,309,.3,,.77,.09],[1.5,,603,,.02,0,,.04,,-.4,473,,,.1,,,.18,.2,.1],[1.5,,152,.01,.07,.06,1,1.21,-16,,,,,,,,,.62,.03],[,,468,.02,.22,.45,1,.84,,5.6,-37,.05,.09,,,,,.8,.27,.05],[,,1959,.01,.04,.12,,.2,,.1,252,.04,,.1,,,,.5,.01,.09],[2.5,,450,.05,.15,.38,1,1.72,.2,-.2,128,.13,.18,,,,.08,.79,.13,.31],[1.5,,261.6256,.07,.1,.26,,1.58,,,,,,.3,,.1,,.43,.17],[2.63,,1727,,.03,.23,,2.65,,-89,5,.06,,,166,,.12,.72],[,,391,.03,.26,.45,1,.07,,,-11,.07,.1,,,,,.56,.14,.2],[1.34,,1117,.07,.07,0,2,.05,,,274,.08,.11,,10,,.09,.82,.11],[,,1705,.24,.15,.12,2,2.97,-5.7,,300,.04,.08],[1.35,,470,.18,.07,0,,2.23,,,-948,,.12,.1,-37,,.01,,,.21],[,,248,,.06,.07,4,1.26,,.3,,,.01,,,.1,,.7,.06,.38],[2.5,,328,.03,.26,.4,4,1.09,.5,.1,,,,.5,,.3,.33,.43,.05,.45],[1.5,,0,.02,,.04,,.37,9.9,,,,,.1,,,.24,,.15],[2,,657,.22,.33,0,3,.28,,-.7,,,.36,,,,.13,.8,.02,.73]];function lt(a={}){let r=window,g=r.document.body,u=(t,o,i)=>t.addEventListener(o,i),E=(t,o,i)=>t.removeEventListener(o,i),e={WIDTH:a.width??null,HEIGHT:a.height??null,CANVAS:r.document.createElement("canvas"),PARENT:a.parent??g,TAPPED:!1,TAPPING:!1,TAPX:0,TAPY:0,ELAPSED:0,FPS:0,math:r.Math,loop:{init:[],update:[],draw:[]}},N=a.fps??60,v=a.background??null,L=a.global??!0,F=a.antialias??!0,k=a.pixelart??!1,S=a.fullscreen??!0,z=a.autoscale??!0,j=a.tappingInterval??100,M=a.loop??{},q=a.plugins??[],T="ontouchstart"in r||r.navigator.maxTouchPoints>0,w=0,_=0,b=null,s=1,D={top:0,left:0},Y=null,G=null,n=null,h={},I=null,p=0,R=0,V=1/N,O=1e3/N,x=0,H=0,d={count:0,time:0},J=Math.PI/180,ft=180/Math.PI,U=Math.PI*2,rt=[],B,A={set(t,o){e[t]=o,L&&(r[t]=o)}};function tt(){if(_RATIO=e.WIDTH/e.HEIGHT,Y=e.WIDTH,G=e.HEIGHT,T){let t=0,o=0;b=i=>{if(I=performance.now(),I-_>j){let l=i.touches[0];X(!0,l.pageX,l.pageY),_=I}},u(e.CANVAS,"touchstart",function(i){i.preventDefault();let l=i.touches[0];t=l.pageX,o=l.pageY,u(g,"touchmove",b),X(!0,l.pageX,l.pageY),_=w=performance.now()}),u(e.CANVAS,"touchend",function(i){i.preventDefault(),E(g,"touchmove",b),X(!1),performance.now()-w<=150&&nt(!0,t,o)})}else b=t=>{I=performance.now(),I-_>j&&(_=I,X(!0,t.pageX,t.pageY))},u(e.CANVAS,"mousedown",function(t){t.preventDefault(),u(g,"mousemove",b),X(!0,t.pageX,t.pageY),_=w=performance.now()}),u(e.CANVAS,"mouseup",function(t){t.preventDefault(),E(g,"mousemove",b),X(!1),performance.now()-w<=150&&nt(!0,t.pageX,t.pageY)});u(r,"focus",()=>{H===0&&(p=performance.now(),H=requestAnimationFrame(K))}),u(r,"blur",()=>{H&&(cancelAnimationFrame(H),H=0),E(g,T?"mousemove":"touchmove",b),X(!1)}),et(),(z||S)&&u(r,"resize",et),(M.init||r.init)&&e.loop.init.push(M.init||r.init),(M.update||r.update)&&e.loop.update.push(M.update||r.update),(M.draw||r.draw)&&e.loop.draw.push(M.draw||r.draw),at();for(let t of e.loop.init)t();v!=null&&(e.CANVAS.style.backgroundColor=m[v%16]),p=performance.now(),H=requestAnimationFrame(K)}function K(){let t=0;for(I=performance.now(),R=I-p,p=I,x+=R,R>1e3&&(x=O);x>=O;){for(let o of e.loop.update)o(V);A.set("ELAPSED",e.ELAPSED+V),x-=O,t++,st()}if(t>0){for(let o of e.loop.draw)o();d.count++,d.time+=t*V,d.time>=1&&(A.set("FPS",d.count),d.time-=1,d.count=0)}H=requestAnimationFrame(K)}function at(){q.sort((t,o)=>(t.priority??10)-(o.priority??10));for(let t of q){let o=t(e,A);if(o)for(let i in o)A.set(i,o[i])}}function ut(t){e.WIDTH>0&&S&&(S=!1,e.HEIGHT=e.HEIGHT>0?e.HEIGHT:e.WIDTH),t.width=e.WIDTH,t.height=e.HEIGHT,e.PARENT.appendChild(t),t.ctx=t.getContext("2d"),n=t.ctx,n.textAlign="start",n.textBaseline="top",t.style.display="block",S?(t.style.position="absolute",t.style.top=t.style.bottom=t.style.left=t.style.right=0):z&&(t.style.margin="auto"),k&&(F=!1),F||(n.imageSmoothingEnabled=!1,t.style.imageRendering="pixelated"),D.top=t.offsetTop,D.left=t.offsetLeft}function et(){let t=e.CANVAS;!z&&!S||(Y=r.innerWidth,G=r.innerHeight,S?(t.width=Y,t.height=G,A.set("WIDTH",Y),A.set("HEIGHT",G)):z&&(s=Math.min(Y/e.WIDTH,G/e.HEIGHT),s=k?Math.floor(s):s,t.style.width=e.WIDTH*s+"px",t.style.height=e.HEIGHT*s+"px"),D.top=t.offsetTop,D.left=t.offsetLeft,e.textalign(h.textAlign||B,h.textBaseline||B),e.linestyle(h.lineWidth||B,h.lineJoin||B,h.lineDash||B))}function ct(){for(let t in e)t in r||(r[t]=e[t])}function st(){A.set("TAPPED",!1)}function nt(t,o,i){A.set("TAPPED",t),A.set("TAPX",(o-D.left)/s),A.set("TAPY",(i-D.top)/s)}function X(t,o,i){A.set("TAPPING",t),A.set("TAPX",(o-D.left)/s),A.set("TAPY",(i-D.top)/s)}return e.math.rand=Math.random,e.math.randi=function(t=1,o=100){return Math.floor(Math.random()*(o-t+1)+t)},e.math.lerp=function(t,o,i){return t+(o-t)*i},e.math.deg2rad=function(t){return t*J},e.math.rad2deg=function(t){return t*ft},e.math.clamp=function(t,o,i){return Math.min(Math.max(t,o),i)},e.clear=function(t=null){t==null?n.clearRect(0,0,e.WIDTH,e.HEIGHT):(n.fillStyle=m[~~t%16],n.beginPath(),n.fillRect(0,0,e.WIDTH,e.HEIGHT))},e.rect=function(t,o,i,l,f=0){n.strokeStyle=m[~~f%16],n.beginPath(),n.strokeRect(~~t,~~o,~~i,~~l)},e.rectfill=function(t,o,i,l,f=0){n.fillStyle=m[~~f%16],n.beginPath(),n.fillRect(~~t,~~o,~~i,~~l)},e.circle=function(t,o,i,l=0){n.strokeStyle=m[~~l%16],n.beginPath(),n.arc(~~t,~~o,~~i,0,U),n.closePath(),n.stroke()},e.circlefill=function(t,o,i,l=0){n.fillStyle=m[~~l%16],n.beginPath(),n.arc(~~t,~~o,~~i,0,U),n.closePath(),n.fill()},e.oval=function(t,o,i,l,f=0){n.strokeStyle=m[~~f%16],n.beginPath(),n.ellipse(~~t+~~i,~~o+~~l,~~i,~~l,0,0,U),n.closePath(),n.stroke()},e.ovalfill=function(t,o,i,l,f=0){n.fillStyle=m[~~f%16],n.beginPath(),n.ellipse(~~t+~~i,~~o+~~l,~~i,~~l,0,0,U),n.closePath(),n.fill()},e.triangle=function(t,o,i,l,f,C,P=0){e.poly([t,o,i,l,f,C],P)},e.trianglefill=function(t,o,i,l,f,C,P=0){e.polyfill([t,o,i,l,f,C],P)},e.poly=function(t,o=0){n.strokeStyle=m[~~o%16],n.beginPath();let i=t.length;for(let l=0;l<i;l+=2)l===0?n.moveTo(~~t[l],~~t[l+1]):n.lineTo(~~t[l],~~t[l+1]);n.lineTo(~~t[0],~~t[1]),n.stroke()},e.polyfill=function(t,o=0){n.fillStyle=m[~~o%16],n.beginPath();let i=t.length;for(let l=0;l<i;l+=2)l===0?n.moveTo(t[l],t[l+1]):n.lineTo(t[l],t[l+1]);n.lineTo(t[0],t[1]),n.fill()},e.line=function(t,o,i,l,f=0){n.strokeStyle=m[~~f%16],n.beginPath(),n.moveTo(~~t,~~o),n.lineTo(~~i,~~l),n.stroke()},e.linestyle=function(t=1,o="miter",i=null){n.lineWidth=h.lineWidth=t,n.lineJoin=h.lineJoin=o,i?(h.lineDash=Array.isArray(i)?i:[i],n.setLineDash(h.lineDash)):(h.lineDash=rt,n.setLineDash(h.lineDash))},e.text=function(t,o,i,l=0,f=null,C="monospace"){f=f||Math.max(16,e.HEIGHT/16),n.font=~~f+"px "+C,n.fillStyle=m[~~l%16],n.fillText(i,~~t,~~o)},e.textalign=function(t="start",o="top"){n.textAlign=h.textAlign=t,n.textBaseline=h.textBaseline=o},e.image=function(t,o,i){n.drawImage(i,~~t,~~o)},e.paint=function(t,o,i){let l=new OffscreenCanvas(t,o),f=n;if(l.width=t,l.height=o,n=l.getContext("2d"),typeof i=="function")i(l,n);else if(Array.isArray(i)){let C=n.createImageData(t,o),P=C.data,Q=y=0;for(let ht of i){for(let Z of ht.split("")){let W=y*(t*4)+Q*4;if(Z===" "||Z===".")P[W]=0,P[W+1]=0,P[W+2]=0,P[W+3]=0;else{c=m[~~parseInt(Z,16)];let pt=parseInt(c.slice(1,3),16),gt=parseInt(c.slice(3,5),16),mt=parseInt(c.slice(5,7),16);P[W]=pt,P[W+1]=gt,P[W+2]=mt,P[W+3]=255}Q++}y++,Q=0}n.putImageData(C,0,0)}return n=f,l},e.transform=function(t,o,i=1,l=0){n.setTransform(i,0,0,i,t,o),n.rotate(l)},e.alpha=function(t=1){n.globalAlpha=t},e.push=function(){n.save()},e.pop=function(){n.restore()},e.sfx=function(t=0,o=1,i=0,l=null){let f=Array.isArray(t)?t:it[~~t%16];return(o!==1||i!==0||l!=null)&&(f=[...f],f[0]=(Number(o)||1)*(f[0]||1),f[1]=l>=0?l:void 0,f[10]=~~f[10]+~~i),ot(...f)},L&&ct(),ut(e.CANVAS),r.document.readyState==="loading"?u(r,"DOMContentLoaded",tt):tt(),e}window.floppy=lt;})();
